// 必須

// 2次元ベクトル

// 位置 (x, y)、方向 (dx, dy)、速度、加算・スカラー倍

// 「プレイヤー位置 + t * 方向」の形で光線を表現するために使います。

// 三角関数（sin, cos）

// 視線方向の回転、カメラ平面の生成

// 角度→方向ベクトル：(cosθ, sinθ)

// 回転：(x', y') = (x cosα - y sinα, x sinα + y cosα)

// 直線（半直線）とグリッドの交差

// 光線がどの格子線（x一定 / y一定）を次に跨ぐか、という計算

// 実装は「連続的な幾何」よりも「格子上の増分計算（DDA）」として扱うのが普通です。

// 距離と内積の直観（魚眼補正のため）

// 壁までの距離 dist をそのまま使うと魚眼になるので補正が必要です。

// 補正の中身は「視線方向への射影」になり、実装的には

// perpDist = dist * cos(Δangle)
// あるいは

// perpDist = dot(hitPos - playerPos, viewDir)
// のどちらかになります（後者が内積）。

// 比例・相似（投影の基本）

// 壁の高さ lineHeight を 1 / distance に比例させる関係

// 例：lineHeight = screenHeight / perpDist の形に落ちます。

// ほぼ必須（入れておくと破綻しにくい）

// 浮動小数点と誤差

// 0 除算回避、epsilon、境界上（ちょうど格子線上）でのぶれ対策

// “数式”というより「数値計算の扱い方」です。

// 角度の正規化

// 角度を [-π, π) あるいは [0, 2π) に保つ

// 回転し続けても値が壊れないための管理です。

// 床・天井テクスチャ（床キャスト）をやるなら

// 画面y座標から床上の点を逆算する比例関係

// ここも基本は「似た三角形」「距離の比例」です

// モジュール化する際
// 以下は「モジュール化する粒度」に合わせて、**機能（関数）単位**で再リスト化したものです。
// C想定で、`vec2`, `player`, `ray`, `hit`, `camera` などの構造体を前提にしています。

// ---

// ## // 必須

// ## // 2次元ベクトル（vec2）

// * `vec2_add(a, b) -> vec2`
//   位置更新、補助計算で使用。
// * `vec2_sub(a, b) -> vec2`
//   画面yから「その行が表す床までの距離」を出す（似た三角形）。
// * `floorcast_world_step(playerPos, leftRayDir, rightRayDir, rowDist,
// screenW)
// ->(worldPos, step)`
//   行内で x を進めるごとの床座標の増分を作る。
// * `floorcast_sample_tex(worldPos) -> (tx, ty)`
//   床座標→テクスチャ座標への変換。

// ---

// ### 実装上のモジュール案（粒度の例）

// * `vec2.c/h`：ベクトル演算
// * `math_angle.c/h`：角度・回転・正規化
// * `camera.c/h`：カメラ平面生成、列→ray生成
// * `dda.c/h`：DDA初期化、step、hit取得
// * `projection.c/h`：距離→描画範囲
// * `floorcast.c/h`：床天井（入れるなら）

// 必要なら、この関数リストに合わせて「最低限の構造体（Ray/DDAState/Hit）」も定義して、依存関係（どのモジュールがどれをincludeするか）まで整理します。
